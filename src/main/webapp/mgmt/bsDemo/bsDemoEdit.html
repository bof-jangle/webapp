<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>DEMO_编辑页面</title>
<!-- 引入bootstrap样式 -->
<link
	href="https://cdn.bootcss.com/bootstrap/3.3.2/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.bootcss.com/bootstrap-validator/0.5.3/css/bootstrapValidator.min.css"
	rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/css/backSystem.css" />
</head>
<body>
	<div id="bodyTopDiv" style="margin-top: 20px;">
		DEMO
		<div style="padding: 0px 1% 15px; float: right;">
			<button class="btn btn-info btn-sm" onclick="submitForm()"
				id="submitButton">保存</button>
			<!-- 		<button class="btn btn-info btn-sm" onclick="deleteForm()" id="deleteButton">删除</button> -->
			<button class="btn btn-info btn-sm" onclick="back()" id="backButton">关闭</button>
		</div>
	</div>
	<div style="margin-top: 20px;">
		<form id="jangleEditForm" name="jangleEditForm"
			style="margin-top: 20px;">
			<div class="form-group" style="padding-left: 15%;">
				<label for="dmDesc">描述：</label> <input type="text"
					class="form-control" style="width: 45%;"
					id="dmDesc" name="dmDesc" placeholder="请输入描述">
			</div>
			<!-- 		<div class="form-group"> -->
			<!-- 			<label for="testPassword">密&nbsp;&nbsp;&nbsp;码：</label> <input -->
			<!-- 				type="text" class="form-control" id="testPassword" -->
			<!-- 				name="testPassword" placeholder="请输入密码"> -->
			<!-- 		</div> -->
			<input type="hidden" name="id" id="id" ><!-- 主键ID隐藏域 -->
		</form>
	</div>
	<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
	<script
		src="https://cdn.bootcss.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script
		src="https://cdn.bootcss.com/bootstrap-validator/0.5.3/js/bootstrapValidator.min.js"></script>
	<!-- 引入中文语言包 -->
	<script
		src="https://cdn.bootcss.com/bootstrap-validator/0.5.3/js/language/zh_CN.min.js"></script>
	<script src="/js/jangle.util.js"></script>
	<script type="text/javascript">
		//校验的渲染
		$(function() {
			$("#jangleEditForm").bootstrapValidator({
				message : 'This value is not valid',
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
				},
				fields : {
					dmDesc : {
						validators : {
							notEmpty : {
								message : "请输入描述"
							}
						}
					}
				}
			});
		});
	</script>
	<script>
		function submitForm() {
			$("#jangleEditForm").data("bootstrapValidator").validate(); //提交验证写法1
			// 			$("#jangleEditForm").bootstrapValidator("validate");		//提交验证写法2
			var valid = $("#jangleEditForm").data("bootstrapValidator")
					.isValid(); //验证通过返回true 不通过false
			if (!valid) {
				alert("请完善信息");
				return;
			}
			$.ajax({
				url : "/bsDemoAction/insert.action",
				dataType : "json",
				type : "POST",
				data : $("#jangleEditForm").serialize(),
				error : function(request, textStatus, errorThrown) {
					jangleShowAjaxError(request, textStatus, errorThrown);
				},
				success : function(data) {
					success(data);
				}
			});
		}

		//关闭
		function back() {
			if (ps["back"]) {
				window.location.href = ps["back"];
			} else {
				window.location.href = document.referrer;
			}
		};
	</script>
</body>
</html>